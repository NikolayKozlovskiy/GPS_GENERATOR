
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../../user_manual/">
      
      
        <link rel="next" href="../columns/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>abs_user - GPS Synthetic Generator</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#common.abs_user" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="GPS Synthetic Generator" class="md-header__button md-logo" aria-label="GPS Synthetic Generator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GPS Synthetic Generator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              abs_user
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/NikolayKozlovskiy/GPS_GENERATOR" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GPS_GENERATOR
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../overview/" class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../dev_guide/" class="md-tabs__link">
        
  
    
  
  Dev Guide

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../user_manual/" class="md-tabs__link">
        
  
    
  
  User Manual

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Code Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../aknowledgement/" class="md-tabs__link">
        
  
    
  
  Aknowledgements

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../LICENSE_DOCS/" class="md-tabs__link">
        
  
    
  
  License

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="GPS Synthetic Generator" class="md-nav__button md-logo" aria-label="GPS Synthetic Generator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GPS Synthetic Generator
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NikolayKozlovskiy/GPS_GENERATOR" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GPS_GENERATOR
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../dev_guide/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Dev Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Dev Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guide/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guide/contribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_manual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Manual
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Code Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" checked>
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    common
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            common
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    abs_user
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    abs_user
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#common.abs_user" class="md-nav__link">
    <span class="md-ellipsis">
      abs_user
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common.abs_user.User" class="md-nav__link">
    <span class="md-ellipsis">
      User
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.create_list_of_locations" class="md-nav__link">
    <span class="md-ellipsis">
      create_list_of_locations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_chaotic_point" class="md-nav__link">
    <span class="md-ellipsis">
      get_chaotic_point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_info_about_loc" class="md-nav__link">
    <span class="md-ellipsis">
      get_info_about_loc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_meaningful_locations" class="md-nav__link">
    <span class="md-ellipsis">
      get_meaningful_locations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_moving_points" class="md-nav__link">
    <span class="md-ellipsis">
      get_moving_points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_points_on_path" class="md-nav__link">
    <span class="md-ellipsis">
      get_points_on_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_random_id_within_buffer" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_id_within_buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_regular_or_random_loc" class="md-nav__link">
    <span class="md-ellipsis">
      get_regular_or_random_loc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common.abs_user.User.get_static_points" class="md-nav__link">
    <span class="md-ellipsis">
      get_static_points
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../columns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    columns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../gps_generator/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    gps_generator
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            gps_generator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gps_generator/gps_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gps_generator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../network/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    network
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    network
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../user/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    user
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            user
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/user_employed_walk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    user_employed_walk
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../aknowledgement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aknowledgements
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../LICENSE_DOCS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>abs_user</h1>

<div class="doc doc-object doc-module">



<a id="common.abs_user"></a>
    <div class="doc doc-contents first">

        <p>User class is a parent class of all child classes specified in user module <code>gps_synth/user</code>.</p>
<p>User class has a combination of concrete and abstract methods:</p>
<ul>
<li>concrete methods are meant to be called in child classes with super() function.</li>
<li>abstract methods are meant to show what methods should be in a child class, but their implementation is a subject of this child class.</li>
</ul>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="common.abs_user.User" class="doc doc-heading">
            <code>User</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" title="abc.ABC" href="https://docs.python.org/3/library/abc.html#abc.ABC">ABC</a></code></p>







              <details class="quote">
                <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">profile_user_config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span>
            <span class="n">profile_user_config</span><span class="p">[</span><span class="s2">&quot;DATE_BEGGINING&quot;</span><span class="p">],</span>
            <span class="n">profile_user_config</span><span class="p">[</span><span class="s2">&quot;DATE_END&quot;</span><span class="p">],</span>
            <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius_buffer_h_w</span> <span class="o">=</span> <span class="n">profile_user_config</span><span class="p">[</span><span class="s2">&quot;RADIUS_BUFFER_H_W&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius_buffer_h_r</span> <span class="o">=</span> <span class="n">profile_user_config</span><span class="p">[</span><span class="s2">&quot;RADIUS_BUFFER_H_R&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mean_move_speed_ms</span> <span class="o">=</span> <span class="n">profile_user_config</span><span class="p">[</span><span class="s2">&quot;MEAN_MOVE_SPEED_MS&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proximity_to_road</span> <span class="o">=</span> <span class="n">profile_user_config</span><span class="p">[</span><span class="s2">&quot;PROXIMITY_TO_ROAD&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">home_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">work_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regular_loc_array</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data_array</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_random_id_within_buffer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">center_point</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">radius_buffer</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">gdf_locations</span><span class="p">:</span> <span class="n">GeoDataFrame</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find a random id of a location which is within a buffer, created around center point with specified distance.</span>
<span class="sd">        A center point should be surronded with some amount of needed locations, otherwise None</span>

<span class="sd">        Args:</span>
<span class="sd">            center_point (Point): A point around which create a buffer</span>
<span class="sd">            radius_buffer (int): A radius of a buffer</span>
<span class="sd">            gdf_locations (GeoDataFrame): Locations to filter with condition &quot;within a buffer&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: Random id among filtered loctions or None if home anchor is too near to border of a place</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">buffer</span> <span class="o">=</span> <span class="n">shapely</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">center_point</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">radius_buffer</span><span class="p">)</span>
        <span class="n">index_list</span> <span class="o">=</span> <span class="n">gdf_locations</span><span class="p">[</span><span class="n">gdf_locations</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">buffer</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span>
        <span class="c1"># TODO: 20 is arbitary threshold, e.g. there could be just a case that a place does not have</span>
        <span class="c1"># some types of locations in many quantaties, think about how logically define this value</span>
        <span class="c1"># and make it as another positional argument</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_list</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">:</span>
            <span class="n">random_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">gdf_locations</span><span class="p">[</span><span class="n">gdf_locations</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">buffer</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">random_id</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_meaningful_locations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gdf_hw</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create meaningful locations for a user: one home, one work, several regular events,</span>
<span class="sd">        the radius between home and work and home and regular locations are defined in the config</span>
<span class="sd">        The distribution of meaningful locations should follow some distance conditions.</span>
<span class="sd">        Store computed anchors in correponding instance attributes</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf_hw (GeoDataFrame): Set of locations of a network to choose from for home and work anchors</span>
<span class="sd">            gdf_event (GeoDataFrame): Set of locations of a network to choose from for regular event anchors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># radius_buffer_h_w (int): Radius to create a buffer around home anchor to search for work anchor</span>
        <span class="n">radius_buffer_h_w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius_buffer_h_w</span>
        <span class="c1"># radius_buffer_h_w (int): Radius to create a buffer around home anchor to search for regular event anchors</span>
        <span class="n">radius_buffer_h_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius_buffer_h_r</span>

        <span class="n">home_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">home_geometry</span> <span class="o">=</span> <span class="n">gdf_hw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">home_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span>
        <span class="c1"># TODO: too conditionally nested think about a better approach</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

            <span class="n">work_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_id_within_buffer</span><span class="p">(</span>
                <span class="n">home_geometry</span><span class="p">,</span> <span class="n">radius_buffer_h_w</span><span class="p">,</span> <span class="n">gdf_hw</span>
            <span class="p">)</span>
            <span class="c1"># if there are not many possible work anchor locations around</span>
            <span class="k">if</span> <span class="n">work_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># change home id</span>
                <span class="n">home_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">home_geometry</span> <span class="o">=</span> <span class="n">gdf_hw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">home_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span>
            <span class="c1"># if the same just choose another work id, but don&#39;t change home anchor</span>
            <span class="k">elif</span> <span class="n">home_id</span> <span class="o">==</span> <span class="n">work_id</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">regular_locations_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">number_of_regular_locations</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">number_of_regular_locations</span><span class="p">:</span>
                    <span class="n">regular_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_id_within_buffer</span><span class="p">(</span>
                        <span class="n">home_geometry</span><span class="p">,</span> <span class="n">radius_buffer_h_r</span><span class="p">,</span> <span class="n">gdf_event</span>
                    <span class="p">)</span>

                    <span class="c1"># if there are not many possible regular event anchors around increase search radius</span>
                    <span class="k">if</span> <span class="n">regular_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">radius_buffer_h_r</span> <span class="o">+=</span> <span class="mi">100</span>
                    <span class="c1"># if id is already used, chooses another one</span>
                    <span class="k">elif</span> <span class="p">(</span>
                        <span class="n">regular_id</span> <span class="ow">in</span> <span class="n">regular_locations_ids</span>
                        <span class="ow">or</span> <span class="n">regular_id</span> <span class="o">==</span> <span class="n">home_id</span>
                        <span class="ow">or</span> <span class="n">regular_id</span> <span class="o">==</span> <span class="n">work_id</span>
                    <span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">regular_locations_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">regular_id</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">home_id</span> <span class="o">=</span> <span class="n">home_id</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">work_id</span> <span class="o">=</span> <span class="n">work_id</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">regular_loc_array</span> <span class="o">=</span> <span class="n">regular_locations_ids</span>
                <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_regular_or_random_loc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">regular_location_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">number_of_events</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Randomly create a list with specified number of event ids, which could be either from regular event locations or completely accidental</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf_event (GeoDataFrame): Set of locations of a network to choose from for regular event anchors</span>
<span class="sd">            regular_location_ids (List[int]): List of regular event locations&#39; ids</span>
<span class="sd">            number_of_events (int): A number of event ids tom create</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[int]: List of event ids for a userto visit within a day</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event_id_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">event_id_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">number_of_events</span><span class="p">:</span>
            <span class="n">choose_reg_or_random</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;reg&quot;</span><span class="p">,</span> <span class="s2">&quot;random&quot;</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">choose_reg_or_random</span> <span class="o">==</span> <span class="s2">&quot;reg&quot;</span><span class="p">:</span>
                <span class="n">event_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">regular_location_ids</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">event_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf_event</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">event_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">event_id_list</span><span class="p">:</span>
                <span class="n">event_id_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>

        <span class="k">return</span> <span class="n">event_id_list</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_info_about_loc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">df_loc</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">list_of_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Based on id of a location find some information about it and store in a list</span>

<span class="sd">        Args:</span>
<span class="sd">            df_loc (DataFrame): Set of locations of a network and their features to search in based on id</span>
<span class="sd">            list_of_ids (List[int]): List of locations&#39; ids to derive some information about</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[List[Union[int, float]]]: List of lists, each element has three items: nearest node id and lat and lon coordinates of location&#39;s centroid</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">list_of_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">loc_id</span> <span class="ow">in</span> <span class="n">list_of_ids</span><span class="p">:</span>
            <span class="n">list_of_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">df_loc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">loc_id</span><span class="p">][</span><span class="s2">&quot;nearest_node_id&quot;</span><span class="p">],</span>
                    <span class="n">df_loc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">loc_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                    <span class="n">df_loc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">loc_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">list_of_info</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_list_of_locations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gdf_hw</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">home_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">work_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">regular_location_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">day_of_week</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Based on day of week define type and number of locations to visit for a user within a day</span>
<span class="sd">        and derive information about them</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf_hw (GeoDataFrame): Set of locations (and their features) of a network to use from for home and work anchors</span>
<span class="sd">            gdf_event (GeoDataFrame): Set of locations (and their features) of a network to use for regular and random event anchors</span>
<span class="sd">            home_id (int): Id of home anchor</span>
<span class="sd">            work_id (int): Id of work anchor</span>
<span class="sd">            regular_location_ids (List[int]): List of regular event locations&#39; ids</span>
<span class="sd">            day_of_week (int): _description_</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[List[Union[int, float]]]: List of lists, each element has three items: nearest node id and lat and lon coordinates of location&#39;s centroid</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">day_of_week</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">number_of_events</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">list_of_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">home_id</span><span class="p">,</span> <span class="n">work_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">number_of_events</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">list_of_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">home_id</span><span class="p">]</span>

        <span class="n">event_id_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_regular_or_random_loc</span><span class="p">(</span>
            <span class="n">gdf_event</span><span class="p">,</span> <span class="n">regular_location_ids</span><span class="p">,</span> <span class="n">number_of_events</span>
        <span class="p">)</span>

        <span class="n">list_of_locations_not_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_about_loc</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">,</span> <span class="n">list_of_ids</span><span class="p">)</span>
        <span class="n">list_of_locations_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_about_loc</span><span class="p">(</span><span class="n">gdf_event</span><span class="p">,</span> <span class="n">event_id_list</span><span class="p">)</span>

        <span class="n">list_of_locations</span> <span class="o">=</span> <span class="n">list_of_locations_not_event</span> <span class="o">+</span> <span class="n">list_of_locations_event</span>

        <span class="k">return</span> <span class="n">list_of_locations</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_static_points</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">data_array</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">Timestamp</span><span class="p">]]],</span>
        <span class="n">transformer_to_WGS</span><span class="p">:</span> <span class="n">Transformer</span><span class="p">,</span>
        <span class="n">startlon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">startlat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">time_start</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
        <span class="n">time_end</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timestamp</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the nearby points around some coordinates (the centroid point of a users location)</span>

<span class="sd">        Args:</span>
<span class="sd">            user_id (int): Id of a user</span>
<span class="sd">            data_array (List[List[Union[int, float, Timestamp]]]): List to store user&#39;s GPS data (user_id, lon, lat, timestamp)</span>
<span class="sd">            startlon (float): Longitude of a point where to start generating nearby points (more precisely their coordinates)</span>
<span class="sd">            startlat (float): Latitude of a point where to start generating nearby points (more precisely their coordinates)</span>
<span class="sd">            time_start (Timestamp): Timestamp from which to start generating static points</span>
<span class="sd">            time_end (Timestamp): Upper timestamp limit of genaration</span>

<span class="sd">        Returns:</span>
<span class="sd">            Timestamp: Time from which to start generating GPS data for another activity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">time_start</span> <span class="o">&lt;</span> <span class="n">time_end</span><span class="p">:</span>
            <span class="n">random_minutes</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="n">possible_forward_azimuth</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
            <span class="n">possible_distance</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># metres</span>
            <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Geod</span><span class="p">(</span><span class="n">ellps</span><span class="o">=</span><span class="s2">&quot;WGS84&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span>
                <span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span><span class="p">,</span> <span class="n">possible_forward_azimuth</span><span class="p">,</span> <span class="n">possible_distance</span>
            <span class="p">)</span>
            <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span>
            <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>
            <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">random_minutes</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_points_on_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">LineString</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate mostly equally distanced points along path between its start and end point</span>

<span class="sd">        Args:</span>
<span class="sd">            path (LineString): A line along which to generate points</span>
<span class="sd">            number_of_points (int): Number of points to generate along the path (it includes the start and end point)</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Point]: List of points placed on the path</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span> <span class="k">for</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">distances</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">points</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_chaotic_point</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">point_start</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
        <span class="n">point_end</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
        <span class="n">radius_of_buffer</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">proximity_to_road</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Produce one chaotic point between two points</span>
<span class="sd">        meaning that with very high likelihood it will not be located on the path but near to it.</span>
<span class="sd">        Applied to make a movement look more humanlike</span>

<span class="sd">        Args:</span>
<span class="sd">            point_start (Point): _description_</span>
<span class="sd">            point_end (Point): _description_</span>
<span class="sd">            radius_of_buffer (int): A radius to define a potential space for a chaotic point</span>
<span class="sd">            proximity_to_road (int): A distance to define how a chaotic point should be from a path</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point: A chaotic point</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">points_intersection</span> <span class="o">=</span> <span class="n">point_start</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius_of_buffer</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
            <span class="n">point_end</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius_of_buffer</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">path_between_points</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span><span class="n">point_start</span><span class="p">,</span> <span class="n">point_end</span><span class="p">])</span>
        <span class="n">final_intersection</span> <span class="o">=</span> <span class="n">points_intersection</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
            <span class="n">path_between_points</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">proximity_to_road</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="n">final_intersection</span><span class="o">.</span><span class="n">bounds</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">chaotic_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">max_x</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">min_y</span><span class="p">,</span> <span class="n">max_y</span><span class="p">)]</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">chaotic_point</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">final_intersection</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">chaotic_point</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_moving_points</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">data_array</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">Timestamp</span><span class="p">]]],</span>
        <span class="n">graph_proj</span><span class="p">:</span> <span class="n">MultiDiGraph</span><span class="p">,</span>
        <span class="n">nodes</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">transformer_to_WGS</span><span class="p">:</span> <span class="n">Transformer</span><span class="p">,</span>
        <span class="n">start_node</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">end_node</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">start_coords</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
        <span class="n">end_coords</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
        <span class="n">mean_move_speed_ms</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
        <span class="n">proximity_to_road</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">time_start</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timestamp</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        First create route between origin and destination locations, interpolate this path with points,</span>
<span class="sd">        and create GPS data while moving from point to point</span>

<span class="sd">        Args:</span>
<span class="sd">            user_id (int): Id of a user</span>
<span class="sd">            data_array (List[List[Union[int, float, Timestamp]]]): List to store user&#39;s GPS data (user_id, lon, lat, timestamp)</span>
<span class="sd">            graph_proj (MultiDiGraph): Projected graph of a network</span>
<span class="sd">            nodes (GeoDataFrame): Nodes of netwrok&#39;s projected graph</span>
<span class="sd">            start_node (int): Id of the nearest node to a start location</span>
<span class="sd">            end_node (int): Id of the nearest node to an end location</span>
<span class="sd">            start_coords Tuple[float, float]: Lon and lat of start location</span>
<span class="sd">            end_coords Tuple[float, float]: Lon and lat of end location</span>
<span class="sd">            mean_move_speed_ms Union[int, float]: _description_</span>
<span class="sd">            proximity_to_road (int): A distance to define how a chaotic point should be from a path</span>
<span class="sd">            time_start (Timestamp): Timestamp from which to start generating moving points</span>

<span class="sd">        Returns:</span>
<span class="sd">            Timestamp: Time from which to start generating GPS data for another activity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the shortest route from start to end node</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span>
            <span class="n">graph_proj</span><span class="p">,</span> <span class="n">start_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span>
        <span class="p">)</span>
        <span class="n">route_nodes</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">route</span><span class="p">]</span>
        <span class="n">route_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">route_nodes</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="c1"># add start location&#39;s coordinates to the beggining</span>
        <span class="c1"># add end location&#39;s coordinates to the end</span>
        <span class="c1"># not all always locations are near to a network</span>
        <span class="n">route_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">start_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">start_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">route_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">end_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">route_list</span><span class="p">)</span>

        <span class="c1"># to make sure that the time difference between</span>
        <span class="c1"># two consecutive points is not higher than 10 seconds</span>
        <span class="c1"># To mimic GPS tracking frequency (it could be even 1 second, but then the amount of data could be enormous)</span>
        <span class="n">min_dist_between_conseq_points</span> <span class="o">=</span> <span class="n">mean_move_speed_ms</span> <span class="o">*</span> <span class="mi">10</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="n">min_dist_between_conseq_points</span><span class="p">:</span>
            <span class="n">number_of_points</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">number_of_points</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="n">min_dist_between_conseq_points</span><span class="p">)</span>

        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_points_on_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>

        <span class="c1"># iterate through each point of created route</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_points</span><span class="p">):</span>
            <span class="c1"># even though the actual path and points are in projected CRS</span>
            <span class="c1"># the final coordinates should be in WGS 84</span>
            <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="c1"># if not a last point calculate a chaotic point</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">number_of_points</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">chaotic_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_chaotic_point</span><span class="p">(</span>
                    <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                    <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
                    <span class="n">min_dist_between_conseq_points</span><span class="p">,</span>
                    <span class="n">proximity_to_road</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">distance_to_chaotic_point</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">chaotic_point</span><span class="p">]</span>
                <span class="p">)</span><span class="o">.</span><span class="n">length</span>
                <span class="c1"># discard situations when start point and a chaotic point are too close and thus time difference would be too small</span>
                <span class="c1"># we build the model and don&#39;t want to use a lot of memory</span>
                <span class="k">if</span> <span class="n">distance_to_chaotic_point</span> <span class="o">&lt;</span> <span class="n">mean_move_speed_ms</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">time_to_chaotic_point</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">time_to_chaotic_point</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">distance_to_chaotic_point</span> <span class="o">/</span> <span class="n">mean_move_speed_ms</span>
                    <span class="p">)</span>

                <span class="c1"># Add current point&#39;s coordinates and the time it was registered in data array</span>
                <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
                <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>

                <span class="c1"># Add time taken to reach a chaotic point</span>
                <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time_to_chaotic_point</span><span class="p">)</span>

                <span class="c1"># Change the current coordinates to coordinate of a chaotic point and project to WGS 84</span>
                <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                    <span class="n">chaotic_point</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">chaotic_point</span><span class="o">.</span><span class="n">y</span>
                <span class="p">)</span>
                <span class="c1"># Lenght from chaotic point to the next point or maybe it will be more clear - end point</span>
                <span class="n">distance_to_next_point</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">chaotic_point</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
                <span class="p">)</span><span class="o">.</span><span class="n">length</span>
                <span class="c1"># discard to precise situations</span>
                <span class="k">if</span> <span class="n">distance_to_next_point</span> <span class="o">&lt;</span> <span class="n">mean_move_speed_ms</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">time_to_next_point</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">time_to_next_point</span> <span class="o">=</span> <span class="n">distance_to_next_point</span> <span class="o">/</span> <span class="n">mean_move_speed_ms</span>

                <span class="c1"># Add chaotic point&#39;s coordinates and the time it was registered in data array</span>
                <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
                <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>

                <span class="c1"># Add time taken to reach a the next point</span>
                <span class="c1"># It will become a start time of the next iteration of a loop</span>
                <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time_to_next_point</span><span class="p">)</span>

            <span class="c1"># if last point in the route - add it and its time to data array</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
                <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">random_plot_of_day</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_start</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
        <span class="n">beggining_of_day</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
        <span class="n">day_of_week</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">list_of_locations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]],</span>
        <span class="n">network_graph_proj</span><span class="p">:</span> <span class="n">MultiDiGraph</span><span class="p">,</span>
        <span class="n">network_nodes</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">transformer_to_WGS</span><span class="p">:</span> <span class="n">Transformer</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timestamp</span><span class="p">:</span>
        <span class="c1"># pylint: disable=missing-function-docstring</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_gps</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">network_gdf_hw</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">network_gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">network_graph_proj</span><span class="p">:</span> <span class="n">MultiDiGraph</span><span class="p">,</span>
        <span class="n">network_nodes</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">transformer_to_WGS</span><span class="p">:</span> <span class="n">Transformer</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># pylint: disable=missing-function-docstring</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.create_list_of_locations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_list_of_locations</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">,</span> <span class="n">gdf_event</span><span class="p">,</span> <span class="n">home_id</span><span class="p">,</span> <span class="n">work_id</span><span class="p">,</span> <span class="n">regular_location_ids</span><span class="p">,</span> <span class="n">day_of_week</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Based on day of week define type and number of locations to visit for a user within a day
and derive information about them</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf_hw</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of locations (and their features) of a network to use from for home and work anchors</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>gdf_event</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of locations (and their features) of a network to use for regular and random event anchors</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>home_id</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Id of home anchor</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>work_id</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Id of work anchor</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>regular_location_ids</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of regular event locations' ids</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>day_of_week</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[List[Union[int, float]]]: List of lists, each element has three items: nearest node id and lat and lon coordinates of location's centroid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_list_of_locations</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">gdf_hw</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">home_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">work_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">regular_location_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
    <span class="n">day_of_week</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on day of week define type and number of locations to visit for a user within a day</span>
<span class="sd">    and derive information about them</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf_hw (GeoDataFrame): Set of locations (and their features) of a network to use from for home and work anchors</span>
<span class="sd">        gdf_event (GeoDataFrame): Set of locations (and their features) of a network to use for regular and random event anchors</span>
<span class="sd">        home_id (int): Id of home anchor</span>
<span class="sd">        work_id (int): Id of work anchor</span>
<span class="sd">        regular_location_ids (List[int]): List of regular event locations&#39; ids</span>
<span class="sd">        day_of_week (int): _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[List[Union[int, float]]]: List of lists, each element has three items: nearest node id and lat and lon coordinates of location&#39;s centroid</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">day_of_week</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
        <span class="n">number_of_events</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">list_of_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">home_id</span><span class="p">,</span> <span class="n">work_id</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">number_of_events</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">list_of_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">home_id</span><span class="p">]</span>

    <span class="n">event_id_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_regular_or_random_loc</span><span class="p">(</span>
        <span class="n">gdf_event</span><span class="p">,</span> <span class="n">regular_location_ids</span><span class="p">,</span> <span class="n">number_of_events</span>
    <span class="p">)</span>

    <span class="n">list_of_locations_not_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_about_loc</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">,</span> <span class="n">list_of_ids</span><span class="p">)</span>
    <span class="n">list_of_locations_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_about_loc</span><span class="p">(</span><span class="n">gdf_event</span><span class="p">,</span> <span class="n">event_id_list</span><span class="p">)</span>

    <span class="n">list_of_locations</span> <span class="o">=</span> <span class="n">list_of_locations_not_event</span> <span class="o">+</span> <span class="n">list_of_locations_event</span>

    <span class="k">return</span> <span class="n">list_of_locations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_chaotic_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_chaotic_point</span><span class="p">(</span><span class="n">point_start</span><span class="p">,</span> <span class="n">point_end</span><span class="p">,</span> <span class="n">radius_of_buffer</span><span class="p">,</span> <span class="n">proximity_to_road</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Produce one chaotic point between two points
meaning that with very high likelihood it will not be located on the path but near to it.
Applied to make a movement look more humanlike</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>point_start</code>
            </td>
            <td>
                  <code><span title="shapely.geometry.Point">Point</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>point_end</code>
            </td>
            <td>
                  <code><span title="shapely.geometry.Point">Point</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius_of_buffer</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A radius to define a potential space for a chaotic point</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>proximity_to_road</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A distance to define how a chaotic point should be from a path</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Point</code></td>            <td>
                  <code><span title="shapely.geometry.Point">Point</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A chaotic point</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_chaotic_point</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">point_start</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
    <span class="n">point_end</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
    <span class="n">radius_of_buffer</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">proximity_to_road</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Produce one chaotic point between two points</span>
<span class="sd">    meaning that with very high likelihood it will not be located on the path but near to it.</span>
<span class="sd">    Applied to make a movement look more humanlike</span>

<span class="sd">    Args:</span>
<span class="sd">        point_start (Point): _description_</span>
<span class="sd">        point_end (Point): _description_</span>
<span class="sd">        radius_of_buffer (int): A radius to define a potential space for a chaotic point</span>
<span class="sd">        proximity_to_road (int): A distance to define how a chaotic point should be from a path</span>

<span class="sd">    Returns:</span>
<span class="sd">        Point: A chaotic point</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">points_intersection</span> <span class="o">=</span> <span class="n">point_start</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius_of_buffer</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
        <span class="n">point_end</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius_of_buffer</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">path_between_points</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span><span class="n">point_start</span><span class="p">,</span> <span class="n">point_end</span><span class="p">])</span>
    <span class="n">final_intersection</span> <span class="o">=</span> <span class="n">points_intersection</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
        <span class="n">path_between_points</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">proximity_to_road</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="n">final_intersection</span><span class="o">.</span><span class="n">bounds</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">chaotic_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
            <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">max_x</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">min_y</span><span class="p">,</span> <span class="n">max_y</span><span class="p">)]</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">chaotic_point</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">final_intersection</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">chaotic_point</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_info_about_loc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_info_about_loc</span><span class="p">(</span><span class="n">df_loc</span><span class="p">,</span> <span class="n">list_of_ids</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Based on id of a location find some information about it and store in a list</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df_loc</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of locations of a network and their features to search in based on id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>list_of_ids</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of locations' ids to derive some information about</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[List[Union[int, float]]]: List of lists, each element has three items: nearest node id and lat and lon coordinates of location's centroid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_info_about_loc</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">df_loc</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">list_of_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on id of a location find some information about it and store in a list</span>

<span class="sd">    Args:</span>
<span class="sd">        df_loc (DataFrame): Set of locations of a network and their features to search in based on id</span>
<span class="sd">        list_of_ids (List[int]): List of locations&#39; ids to derive some information about</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[List[Union[int, float]]]: List of lists, each element has three items: nearest node id and lat and lon coordinates of location&#39;s centroid</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">list_of_info</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">loc_id</span> <span class="ow">in</span> <span class="n">list_of_ids</span><span class="p">:</span>
        <span class="n">list_of_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">df_loc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">loc_id</span><span class="p">][</span><span class="s2">&quot;nearest_node_id&quot;</span><span class="p">],</span>
                <span class="n">df_loc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">loc_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                <span class="n">df_loc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">loc_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">list_of_info</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_meaningful_locations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_meaningful_locations</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">,</span> <span class="n">gdf_event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create meaningful locations for a user: one home, one work, several regular events,
the radius between home and work and home and regular locations are defined in the config
The distribution of meaningful locations should follow some distance conditions.
Store computed anchors in correponding instance attributes</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf_hw</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of locations of a network to choose from for home and work anchors</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>gdf_event</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of locations of a network to choose from for regular event anchors</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_meaningful_locations</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">gdf_hw</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create meaningful locations for a user: one home, one work, several regular events,</span>
<span class="sd">    the radius between home and work and home and regular locations are defined in the config</span>
<span class="sd">    The distribution of meaningful locations should follow some distance conditions.</span>
<span class="sd">    Store computed anchors in correponding instance attributes</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf_hw (GeoDataFrame): Set of locations of a network to choose from for home and work anchors</span>
<span class="sd">        gdf_event (GeoDataFrame): Set of locations of a network to choose from for regular event anchors</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># radius_buffer_h_w (int): Radius to create a buffer around home anchor to search for work anchor</span>
    <span class="n">radius_buffer_h_w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius_buffer_h_w</span>
    <span class="c1"># radius_buffer_h_w (int): Radius to create a buffer around home anchor to search for regular event anchors</span>
    <span class="n">radius_buffer_h_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius_buffer_h_r</span>

    <span class="n">home_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">home_geometry</span> <span class="o">=</span> <span class="n">gdf_hw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">home_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span>
    <span class="c1"># TODO: too conditionally nested think about a better approach</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

        <span class="n">work_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_id_within_buffer</span><span class="p">(</span>
            <span class="n">home_geometry</span><span class="p">,</span> <span class="n">radius_buffer_h_w</span><span class="p">,</span> <span class="n">gdf_hw</span>
        <span class="p">)</span>
        <span class="c1"># if there are not many possible work anchor locations around</span>
        <span class="k">if</span> <span class="n">work_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># change home id</span>
            <span class="n">home_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf_hw</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">home_geometry</span> <span class="o">=</span> <span class="n">gdf_hw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">home_id</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span>
        <span class="c1"># if the same just choose another work id, but don&#39;t change home anchor</span>
        <span class="k">elif</span> <span class="n">home_id</span> <span class="o">==</span> <span class="n">work_id</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">regular_locations_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">number_of_regular_locations</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">number_of_regular_locations</span><span class="p">:</span>
                <span class="n">regular_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_id_within_buffer</span><span class="p">(</span>
                    <span class="n">home_geometry</span><span class="p">,</span> <span class="n">radius_buffer_h_r</span><span class="p">,</span> <span class="n">gdf_event</span>
                <span class="p">)</span>

                <span class="c1"># if there are not many possible regular event anchors around increase search radius</span>
                <span class="k">if</span> <span class="n">regular_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">radius_buffer_h_r</span> <span class="o">+=</span> <span class="mi">100</span>
                <span class="c1"># if id is already used, chooses another one</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="n">regular_id</span> <span class="ow">in</span> <span class="n">regular_locations_ids</span>
                    <span class="ow">or</span> <span class="n">regular_id</span> <span class="o">==</span> <span class="n">home_id</span>
                    <span class="ow">or</span> <span class="n">regular_id</span> <span class="o">==</span> <span class="n">work_id</span>
                <span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">regular_locations_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">regular_id</span><span class="p">)</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">home_id</span> <span class="o">=</span> <span class="n">home_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">work_id</span> <span class="o">=</span> <span class="n">work_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">regular_loc_array</span> <span class="o">=</span> <span class="n">regular_locations_ids</span>
            <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_moving_points" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_moving_points</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">data_array</span><span class="p">,</span> <span class="n">graph_proj</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">transformer_to_WGS</span><span class="p">,</span> <span class="n">start_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">,</span> <span class="n">start_coords</span><span class="p">,</span> <span class="n">end_coords</span><span class="p">,</span> <span class="n">mean_move_speed_ms</span><span class="p">,</span> <span class="n">proximity_to_road</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>First create route between origin and destination locations, interpolate this path with points,
and create GPS data while moving from point to point</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Id of a user</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_array</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>, <span title="pandas.Timestamp">Timestamp</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List to store user's GPS data (user_id, lon, lat, timestamp)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>graph_proj</code>
            </td>
            <td>
                  <code><span title="networkx.MultiDiGraph">MultiDiGraph</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Projected graph of a network</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nodes</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Nodes of netwrok's projected graph</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start_node</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Id of the nearest node to a start location</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>end_node</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Id of the nearest node to an end location</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start_coords</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lon and lat of start location</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>end_coords</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lon and lat of end location</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mean_move_speed_ms</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>proximity_to_road</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A distance to define how a chaotic point should be from a path</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_start</code>
            </td>
            <td>
                  <code><span title="pandas.Timestamp">Timestamp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp from which to start generating moving points</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Timestamp</code></td>            <td>
                  <code><span title="pandas.Timestamp">Timestamp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time from which to start generating GPS data for another activity</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_moving_points</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">data_array</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">Timestamp</span><span class="p">]]],</span>
    <span class="n">graph_proj</span><span class="p">:</span> <span class="n">MultiDiGraph</span><span class="p">,</span>
    <span class="n">nodes</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">transformer_to_WGS</span><span class="p">:</span> <span class="n">Transformer</span><span class="p">,</span>
    <span class="n">start_node</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">end_node</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">start_coords</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">end_coords</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">mean_move_speed_ms</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">proximity_to_road</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">time_start</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timestamp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    First create route between origin and destination locations, interpolate this path with points,</span>
<span class="sd">    and create GPS data while moving from point to point</span>

<span class="sd">    Args:</span>
<span class="sd">        user_id (int): Id of a user</span>
<span class="sd">        data_array (List[List[Union[int, float, Timestamp]]]): List to store user&#39;s GPS data (user_id, lon, lat, timestamp)</span>
<span class="sd">        graph_proj (MultiDiGraph): Projected graph of a network</span>
<span class="sd">        nodes (GeoDataFrame): Nodes of netwrok&#39;s projected graph</span>
<span class="sd">        start_node (int): Id of the nearest node to a start location</span>
<span class="sd">        end_node (int): Id of the nearest node to an end location</span>
<span class="sd">        start_coords Tuple[float, float]: Lon and lat of start location</span>
<span class="sd">        end_coords Tuple[float, float]: Lon and lat of end location</span>
<span class="sd">        mean_move_speed_ms Union[int, float]: _description_</span>
<span class="sd">        proximity_to_road (int): A distance to define how a chaotic point should be from a path</span>
<span class="sd">        time_start (Timestamp): Timestamp from which to start generating moving points</span>

<span class="sd">    Returns:</span>
<span class="sd">        Timestamp: Time from which to start generating GPS data for another activity</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># get the shortest route from start to end node</span>
    <span class="n">route</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span>
        <span class="n">graph_proj</span><span class="p">,</span> <span class="n">start_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span>
    <span class="p">)</span>
    <span class="n">route_nodes</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">route</span><span class="p">]</span>
    <span class="n">route_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">route_nodes</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c1"># add start location&#39;s coordinates to the beggining</span>
    <span class="c1"># add end location&#39;s coordinates to the end</span>
    <span class="c1"># not all always locations are near to a network</span>
    <span class="n">route_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">start_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">start_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">route_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">end_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">route_list</span><span class="p">)</span>

    <span class="c1"># to make sure that the time difference between</span>
    <span class="c1"># two consecutive points is not higher than 10 seconds</span>
    <span class="c1"># To mimic GPS tracking frequency (it could be even 1 second, but then the amount of data could be enormous)</span>
    <span class="n">min_dist_between_conseq_points</span> <span class="o">=</span> <span class="n">mean_move_speed_ms</span> <span class="o">*</span> <span class="mi">10</span>

    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="n">min_dist_between_conseq_points</span><span class="p">:</span>
        <span class="n">number_of_points</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">number_of_points</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="n">min_dist_between_conseq_points</span><span class="p">)</span>

    <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_points_on_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>

    <span class="c1"># iterate through each point of created route</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_points</span><span class="p">):</span>
        <span class="c1"># even though the actual path and points are in projected CRS</span>
        <span class="c1"># the final coordinates should be in WGS 84</span>
        <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="c1"># if not a last point calculate a chaotic point</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">number_of_points</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">chaotic_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_chaotic_point</span><span class="p">(</span>
                <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
                <span class="n">min_dist_between_conseq_points</span><span class="p">,</span>
                <span class="n">proximity_to_road</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">distance_to_chaotic_point</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span>
                <span class="p">[</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">chaotic_point</span><span class="p">]</span>
            <span class="p">)</span><span class="o">.</span><span class="n">length</span>
            <span class="c1"># discard situations when start point and a chaotic point are too close and thus time difference would be too small</span>
            <span class="c1"># we build the model and don&#39;t want to use a lot of memory</span>
            <span class="k">if</span> <span class="n">distance_to_chaotic_point</span> <span class="o">&lt;</span> <span class="n">mean_move_speed_ms</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">time_to_chaotic_point</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time_to_chaotic_point</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">distance_to_chaotic_point</span> <span class="o">/</span> <span class="n">mean_move_speed_ms</span>
                <span class="p">)</span>

            <span class="c1"># Add current point&#39;s coordinates and the time it was registered in data array</span>
            <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
            <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>

            <span class="c1"># Add time taken to reach a chaotic point</span>
            <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time_to_chaotic_point</span><span class="p">)</span>

            <span class="c1"># Change the current coordinates to coordinate of a chaotic point and project to WGS 84</span>
            <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="n">chaotic_point</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">chaotic_point</span><span class="o">.</span><span class="n">y</span>
            <span class="p">)</span>
            <span class="c1"># Lenght from chaotic point to the next point or maybe it will be more clear - end point</span>
            <span class="n">distance_to_next_point</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span>
                <span class="p">[</span><span class="n">chaotic_point</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
            <span class="p">)</span><span class="o">.</span><span class="n">length</span>
            <span class="c1"># discard to precise situations</span>
            <span class="k">if</span> <span class="n">distance_to_next_point</span> <span class="o">&lt;</span> <span class="n">mean_move_speed_ms</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">time_to_next_point</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time_to_next_point</span> <span class="o">=</span> <span class="n">distance_to_next_point</span> <span class="o">/</span> <span class="n">mean_move_speed_ms</span>

            <span class="c1"># Add chaotic point&#39;s coordinates and the time it was registered in data array</span>
            <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
            <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>

            <span class="c1"># Add time taken to reach a the next point</span>
            <span class="c1"># It will become a start time of the next iteration of a loop</span>
            <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time_to_next_point</span><span class="p">)</span>

        <span class="c1"># if last point in the route - add it and its time to data array</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
            <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_points_on_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_points_on_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generate mostly equally distanced points along path between its start and end point</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="shapely.geometry.LineString">LineString</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A line along which to generate points</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>number_of_points</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of points to generate along the path (it includes the start and end point)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<span title="shapely.geometry.Point">Point</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[Point]: List of points placed on the path</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_points_on_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">LineString</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate mostly equally distanced points along path between its start and end point</span>

<span class="sd">    Args:</span>
<span class="sd">        path (LineString): A line along which to generate points</span>
<span class="sd">        number_of_points (int): Number of points to generate along the path (it includes the start and end point)</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[Point]: List of points placed on the path</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span> <span class="k">for</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">distances</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">points</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_random_id_within_buffer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_random_id_within_buffer</span><span class="p">(</span><span class="n">center_point</span><span class="p">,</span> <span class="n">radius_buffer</span><span class="p">,</span> <span class="n">gdf_locations</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Find a random id of a location which is within a buffer, created around center point with specified distance.
A center point should be surronded with some amount of needed locations, otherwise None</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>center_point</code>
            </td>
            <td>
                  <code><span title="shapely.geometry.Point">Point</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A point around which create a buffer</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius_buffer</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A radius of a buffer</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>gdf_locations</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Locations to filter with condition "within a buffer"</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Random id among filtered loctions or None if home anchor is too near to border of a place</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_random_id_within_buffer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">center_point</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">radius_buffer</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">gdf_locations</span><span class="p">:</span> <span class="n">GeoDataFrame</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find a random id of a location which is within a buffer, created around center point with specified distance.</span>
<span class="sd">    A center point should be surronded with some amount of needed locations, otherwise None</span>

<span class="sd">    Args:</span>
<span class="sd">        center_point (Point): A point around which create a buffer</span>
<span class="sd">        radius_buffer (int): A radius of a buffer</span>
<span class="sd">        gdf_locations (GeoDataFrame): Locations to filter with condition &quot;within a buffer&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Random id among filtered loctions or None if home anchor is too near to border of a place</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">buffer</span> <span class="o">=</span> <span class="n">shapely</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">center_point</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">radius_buffer</span><span class="p">)</span>
    <span class="n">index_list</span> <span class="o">=</span> <span class="n">gdf_locations</span><span class="p">[</span><span class="n">gdf_locations</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">buffer</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span>
    <span class="c1"># TODO: 20 is arbitary threshold, e.g. there could be just a case that a place does not have</span>
    <span class="c1"># some types of locations in many quantaties, think about how logically define this value</span>
    <span class="c1"># and make it as another positional argument</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_list</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">random_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">gdf_locations</span><span class="p">[</span><span class="n">gdf_locations</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">buffer</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">random_id</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_regular_or_random_loc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_regular_or_random_loc</span><span class="p">(</span><span class="n">gdf_event</span><span class="p">,</span> <span class="n">regular_location_ids</span><span class="p">,</span> <span class="n">number_of_events</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Randomly create a list with specified number of event ids, which could be either from regular event locations or completely accidental</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf_event</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of locations of a network to choose from for regular event anchors</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>regular_location_ids</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of regular event locations' ids</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>number_of_events</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A number of event ids tom create</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[int]: List of event ids for a userto visit within a day</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_regular_or_random_loc</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">gdf_event</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">regular_location_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
    <span class="n">number_of_events</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly create a list with specified number of event ids, which could be either from regular event locations or completely accidental</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf_event (GeoDataFrame): Set of locations of a network to choose from for regular event anchors</span>
<span class="sd">        regular_location_ids (List[int]): List of regular event locations&#39; ids</span>
<span class="sd">        number_of_events (int): A number of event ids tom create</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[int]: List of event ids for a userto visit within a day</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_id_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">event_id_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">number_of_events</span><span class="p">:</span>
        <span class="n">choose_reg_or_random</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;reg&quot;</span><span class="p">,</span> <span class="s2">&quot;random&quot;</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">choose_reg_or_random</span> <span class="o">==</span> <span class="s2">&quot;reg&quot;</span><span class="p">:</span>
            <span class="n">event_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">regular_location_ids</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gdf_event</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">event_id_list</span><span class="p">:</span>
            <span class="n">event_id_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>

    <span class="k">return</span> <span class="n">event_id_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common.abs_user.User.get_static_points" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_static_points</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">data_array</span><span class="p">,</span> <span class="n">transformer_to_WGS</span><span class="p">,</span> <span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span><span class="p">,</span> <span class="n">time_start</span><span class="p">,</span> <span class="n">time_end</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generate the nearby points around some coordinates (the centroid point of a users location)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Id of a user</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_array</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>, <span title="pandas.Timestamp">Timestamp</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List to store user's GPS data (user_id, lon, lat, timestamp)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>startlon</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitude of a point where to start generating nearby points (more precisely their coordinates)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>startlat</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Latitude of a point where to start generating nearby points (more precisely their coordinates)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_start</code>
            </td>
            <td>
                  <code><span title="pandas.Timestamp">Timestamp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp from which to start generating static points</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_end</code>
            </td>
            <td>
                  <code><span title="pandas.Timestamp">Timestamp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upper timestamp limit of genaration</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Timestamp</code></td>            <td>
                  <code><span title="pandas.Timestamp">Timestamp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time from which to start generating GPS data for another activity</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>gps_synth/common/abs_user.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_static_points</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">data_array</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">Timestamp</span><span class="p">]]],</span>
    <span class="n">transformer_to_WGS</span><span class="p">:</span> <span class="n">Transformer</span><span class="p">,</span>
    <span class="n">startlon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">startlat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">time_start</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
    <span class="n">time_end</span><span class="p">:</span> <span class="n">Timestamp</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timestamp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the nearby points around some coordinates (the centroid point of a users location)</span>

<span class="sd">    Args:</span>
<span class="sd">        user_id (int): Id of a user</span>
<span class="sd">        data_array (List[List[Union[int, float, Timestamp]]]): List to store user&#39;s GPS data (user_id, lon, lat, timestamp)</span>
<span class="sd">        startlon (float): Longitude of a point where to start generating nearby points (more precisely their coordinates)</span>
<span class="sd">        startlat (float): Latitude of a point where to start generating nearby points (more precisely their coordinates)</span>
<span class="sd">        time_start (Timestamp): Timestamp from which to start generating static points</span>
<span class="sd">        time_end (Timestamp): Upper timestamp limit of genaration</span>

<span class="sd">    Returns:</span>
<span class="sd">        Timestamp: Time from which to start generating GPS data for another activity</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span> <span class="o">=</span> <span class="n">transformer_to_WGS</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">time_start</span> <span class="o">&lt;</span> <span class="n">time_end</span><span class="p">:</span>
        <span class="n">random_minutes</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">possible_forward_azimuth</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
        <span class="n">possible_distance</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># metres</span>
        <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Geod</span><span class="p">(</span><span class="n">ellps</span><span class="o">=</span><span class="s2">&quot;WGS84&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span>
            <span class="n">startlon</span><span class="p">,</span> <span class="n">startlat</span><span class="p">,</span> <span class="n">possible_forward_azimuth</span><span class="p">,</span> <span class="n">possible_distance</span>
        <span class="p">)</span>
        <span class="n">time_gps</span> <span class="o">=</span> <span class="n">time_start</span>
        <span class="n">data_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">user_id</span><span class="p">,</span> <span class="n">time_gps</span><span class="p">,</span> <span class="n">endLon</span><span class="p">,</span> <span class="n">endLat</span><span class="p">])</span>
        <span class="n">time_start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">random_minutes</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">time_start</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.integrate", "navigation.tracking", "navigation.top", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>